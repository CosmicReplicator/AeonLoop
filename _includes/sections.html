{% assign contentBlocks = page.sections | default: page.chapters %} {% if
contentBlocks %} {% for block in contentBlocks %}
<!-- Render the main block title -->
<h3>{{ block.section | default: block.title }}</h3>
{% assign blockContent = block.text | default: block.content %} {% if
blockContent %}
<p>{{ blockContent | safe }}</p>
{% endif %}

<!-- Render nested subsections if they exist -->
{% if block.subsections %} {% for sub in block.subsections %}
<h3>{{ sub.title }}</h3>
{% assign subContent = sub.text | default: sub.content %} {% if subContent %}
<p>{{ subContent | safe }}</p>
{% endif %} {% endfor %} {% endif %} {% endfor %} {% endif %}
