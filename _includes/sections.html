{% assign contentBlocks = page.sections | default: page.chapters %}
{% if contentBlocks %}
  {% for block in contentBlocks %}
    <h3>{{ block.section | default: block.title }}</h3>
    {% assign blockContent = block.text | default: block.content %}
    {% if blockContent %}
      <p>{{ blockContent }}</p>
    {% endif %}
    
    {% assign nested = block.subsections | default: block.sections %}
    {% if nested %}
      {% for sub in nested %}
        <h3>{{ sub.title }}</h3>
        {% assign subContent = sub.text | default: sub.content %}
        {% if subContent %}
          <p>{{ subContent }}</p>
        {% endif %}
      {% endfor %}
    {% endif %}
    
  {% endfor %}
{% endif %}
